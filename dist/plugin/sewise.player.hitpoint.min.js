/*
 * Name: SewisePlayer hitpoint plugin
 * Author: keyun
 * Website: http://player.sewise.com
 * Date: October 26, 2016
 * Copyright: 2013-2016, Sewise
 * Mail: keyun@sewise.com
 *  - Licensed under the MIT license
 * 
 */

!function(a,b){var c=a.SewiseHitPoint=function(){this.player=null,this.box=null,this.timeTxt=null,this.progressSeekline=null};c.prototype.init=function(a){this.player=a;var d=this.player.getPlayerContainer();b(d).append(c.template),this.createThumbItem(),this.createBox(),this.progressSeekline=this.player.playController.skinController.getProgressSeekline(),this.beginShow(),this.player.on("timeupdate",function(){})},c.prototype.createThumbItem=function(){for(var a=0;14>a;a++){var c="../assets/image/"+(a+1)+".jpg",d='<li class="mTSThumbContainer"><a href="#"><img src="'+c+'" class="mTSThumb"></a></li>';b(d).appendTo(".mTSContainer")}},c.prototype.createBox=function(){this.box=document.createElement("div"),this.box.className="mTS_box",b(".mTSWrapper").append(this.box),this.timeTxt=document.createElement("span"),this.timeTxt.style.position="absolute",this.timeTxt.style.color="#ffffff",this.timeTxt.style.width="128px",this.timeTxt.style.display="block",this.timeTxt.style.textAlign="center",b(".mTSWrapper").append(this.timeTxt)},c.prototype.beginShow=function(){function a(a){var b;return a=Math.floor(a),b=10>a?"0"+a:String(a)}function c(b){if(!(0>b)){var c=a(b/60),d=a(b%60);return c+":"+d}}var d=this;b(this.progressSeekline).mousemove(function(a){b(".mTSWrapper").show();var e=a.pageX-b(d.box).width()/2;b(d.box).css("left",e);var f=parseInt(13*Math.random());4>f&&(f=4),f>8&&(f=8);var g=b(".mTSContainer").find("li").get(f);b(g).addClass("currentLi").siblings().removeClass("currentLi");var h=b(".currentLi").prevAll();ulLeft=128*-h.length+e,b(".mTSContainer").stop(!0),b(".mTSContainer").animate({left:ulLeft},100);var i=a.pageX-a.target.getBoundingClientRect().left,j=b(d.progressSeekline).width(),k=parseInt(i/j*d.player.duration()),l=c(k);b(d.timeTxt).css("left",e),b(d.timeTxt).text(l)}),b(this.progressSeekline).mouseleave(function(){b(".mTSWrapper").hide()}),b(".mTSWrapper").mouseover(function(){b(".mTSWrapper").show()}),b(".mTSWrapper").mouseleave(function(){b(".mTSWrapper").hide()})},c.template='<div class="mTSWrapper"><ul class="mTSContainer"></ul></div>'}(window,window.jQuery);